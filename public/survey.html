<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Friend Finder</title>

	<!-- Latest compiled and minified CSS & JS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	<!-- Font Awesome Glyphicons -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

	<!-- Chosen -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
</head>

<body>
	<div class="container">
		<div class="jumbotron" id="survey">
			<h1 class="text-center">Friend Survey</h1>
		</div>

		<div class="row">
			<div class="col-md-12">
				<form>
					<div id="name-group" class="form-group">
						<h3>Name (required)</h3>
						<input type="text" class="form-control" id="name" placeholder="Lois Lane">
						<span id="name-span" aria-hidden="true"></span>
					</div>
					<div id="photo-group" class="form-group">
						<h3>Link to Photograph (required)</h3>
						<input type="text" class="form-control" id="photo" placeholder="www.loislane.com/photo">
						<span id="photo-span" aria-hidden="true"></span>
					</div>
				</form>
			</div>
		</div>

		<hr id="survery-hr">

		<div class="row">
			<div class="col-md-12">
				<div class="panel panel-default">
					<div class="panel-heading" id="panel-top">Friend-Match Quiz</div>
					<div class="panel-body">
						<form>
							<div class="form-group">
								<label>I like to make neat things for the internets using numbers and letters.</label>
								<select class="form-control" id="q1">
                      <option>1 (strongly disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (strongly agree)</option>
                    </select>
							</div>
							<div class="form-group">
								<label>I think the front end is the bee's knees.</label>
								<select class="form-control" id="q2">
                      <option>1 (strongly disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (strongly agree)</option>
                    </select>
							</div>
							<div class="form-group">
								<label>I think the back end is the cat's pajamas.</label>
								<select class="form-control" id="q3">
                      <option>1 (strongly disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (strongly agree)</option>
                    </select>
							</div>
							<div class="form-group">
								<label>Even though I would like a career using Javascript, I secretly (or openly) think Javascript is trying to kill me.</label>
								<select class="form-control" id="q4">
                      <option>1 (strongly disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (strongly agree)</option>
                    </select>
							</div>
							<div class="form-group">
								<label>When frustrated, I choose to hit myself in the face rather than hit my Mac in the face becuase facial reconstructive surgery is more fun than setting up a new machine.</label>
								<select class="form-control" id="q5">
                      <option>1 (strongly disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (strongly agree)</option>
                    </select>
							</div>
							<div class="form-group">
								<label>When JavaScript gives me a console error on line 68 when I only have 43 lines of code, I die a little inside.</label>
								<select class="form-control" id="q6">
                      <option>1 (strongly disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (strongly agree)</option>
                    </select>
							</div>
							<div class="form-group">
								<label>The fact that at some point in my career a client might ask me to use Flash or allow for IE usage both irritates and terrifies me. .</label>
								<select class="form-control" id="q7">
                      <option>1 (strongly disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (strongly agree)</option>
                    </select>
							</div>
							<div class="form-group">
								<label>All I do is study coding languages.</label>
								<select class="form-control" id="q8">
                      <option>1 (strongly disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (strongly agree)</option>
                    </select>
							</div>
							<div class="form-group">
								<label>All I do is study coding languages and consume caffeine.</label>
								<select class="form-control" id="q9">
                      <option>1 (strongly disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (strongly agree)</option>
                    </select>
							</div>
							<div class="form-group">
								<label>All I do is study coding languages and consume caffeine and alcohol.</label>
								<select class="form-control" id="q10">
                      <option>1 (strongly disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (strongly agree)</option>
                    </select>
							</div>
							<button class="btn" id="submit-button" type="submit">Submit</button>
						</form>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="modal" role="dialog">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h1 class="modal-title text-center">Here's your new friend!</h1>
					</div>
					<div class="modal-body">
						<h1 id="match-name" class="text-center"></h1>
						<img src="" alt="" id="match-image" class="img-responsive">
						<h4 id="message" class="text-center"></h4>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

	</div>

	<script type="text/javascript">


	  	// Chosen CSS
	    var config = {
	      '.chosen-select'           : {},
	      '.chosen-select-deselect'  : {allow_single_deselect:true},
	      '.chosen-select-no-single' : {disable_search_threshold:10},
	      '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
	      '.chosen-select-width'     : {width:"95%"}
	    }
	    for (var selector in config) {
	      $(selector).chosen(config[selector]);
	    }

	    // Capture the form inputs
	    $("#submit").on("click", function(){

	    	// Form validation
	    	function validateForm() {
			  var isValid = true;
			  $('.form-control').each(function() {
			    if ( $(this).val() === '' )
			        isValid = false;
			  });

			  $('.chosen-select').each(function() {

			  	if( $(this).val() === "")
			  		isValid = false
			  })
			  return isValid;
			}

			// If all required fields are filled
			if (validateForm() == true)
			{
				// Create an object for the user's data
		    	var userData = {
		    		name: $("#name").val(),
		    		photo: $("#photo").val(),
		    		scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(),
						$("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
		    	}


		    	// Grab the URL of the website
		    	var currentURL = window.location.origin;

		    	// AJAX post the data to the friends API.
		    	$.post(currentURL + "/api/friends", userData, function(data){

		    		// Grab the result from the AJAX post so that the best match's name and photo are displayed.
		    		$("#match-name").text(data.name);
		    		$('#match-image').attr("src", data.photo);

			    	// Show the modal with the best match
			    	$("#resultsModal").modal('toggle');

		    	});
			}
			else
			{
				alert("Please fill out all fields before submitting!");
			}

	    	return false;
	    });



	</script>
</body>

</html
